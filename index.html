<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Voxel Ray Traversal Engine v2.1 - Brick Maps</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            background: #1a1a2e;
            color: #eee;
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
            overflow: hidden;
        }
        
        #container {
            display: flex;
            height: 100vh;
        }
        
        #canvas-container {
            flex: 1;
            position: relative;
            cursor: crosshair;
        }
        
        #canvas-container.locked {
            cursor: none;
        }
        
        canvas {
            display: block;
            width: 100%;
            height: 100%;
        }
        
        #ui {
            width: 300px;
            background: #16213e;
            padding: 20px;
            overflow-y: auto;
        }
        
        h1 {
            font-size: 1.2em;
            margin-bottom: 5px;
            color: #e94560;
        }
        
        .version {
            font-size: 0.75em;
            color: #4ecca3;
            margin-bottom: 15px;
        }
        
        h2 {
            font-size: 0.9em;
            margin: 15px 0 10px;
            color: #0f3460;
            background: #e94560;
            padding: 5px 10px;
            border-radius: 4px;
        }
        
        .stat {
            display: flex;
            justify-content: space-between;
            margin: 6px 0;
            font-size: 0.82em;
        }
        
        .stat-label {
            color: #888;
        }
        
        .stat-value {
            color: #4ecca3;
            font-family: 'Consolas', 'Monaco', monospace;
        }
        
        .stat-value.highlight {
            color: #ffd700;
        }
        
        .stat-value.new {
            color: #ff6b9d;
        }
        
        .control-group {
            margin: 10px 0;
        }
        
        label {
            display: block;
            margin-bottom: 5px;
            font-size: 0.85em;
            color: #888;
        }
        
        input[type="range"] {
            width: 100%;
            margin: 5px 0;
            accent-color: #e94560;
        }
        
        input[type="checkbox"] {
            accent-color: #e94560;
            margin-right: 8px;
        }
        
        select {
            width: 100%;
            padding: 8px;
            background: #0f3460;
            border: none;
            color: #eee;
            border-radius: 4px;
            cursor: pointer;
        }
        
        select:focus {
            outline: 2px solid #e94560;
        }
        
        .info {
            background: #0f3460;
            padding: 10px;
            border-radius: 4px;
            font-size: 0.8em;
            line-height: 1.5;
            margin-top: 15px;
        }
        
        .key {
            display: inline-block;
            background: #e94560;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Consolas', 'Monaco', monospace;
            margin: 1px;
            font-size: 0.9em;
        }
        
        .badge {
            display: inline-block;
            background: #4ecca3;
            color: #0f3460;
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 0.7em;
            font-weight: bold;
            margin-left: 5px;
            vertical-align: middle;
        }
        
        .badge.phase2 {
            background: #ff6b9d;
            color: #fff;
        }
        
        .tech-note {
            background: #0a1628;
            border-left: 3px solid #4ecca3;
            padding: 8px 10px;
            margin: 10px 0;
            font-size: 0.75em;
            color: #aaa;
        }
        
        .tech-note strong {
            color: #4ecca3;
        }
        
        #overlay {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            pointer-events: none;
            opacity: 1;
            transition: opacity 0.3s ease;
        }
        
        #overlay.hidden {
            opacity: 0;
        }
        
        #overlay h2 {
            background: none;
            color: #fff;
            font-size: 1.5em;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }
        
        #overlay p {
            color: #aaa;
            margin-top: 10px;
        }
        
        .crosshair {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 20px;
            height: 20px;
            opacity: 0;
            transition: opacity 0.3s ease;
            pointer-events: none;
        }
        
        .crosshair.visible {
            opacity: 0.7;
        }
        
        .crosshair::before,
        .crosshair::after {
            content: '';
            position: absolute;
            background: #fff;
        }
        
        .crosshair::before {
            width: 2px;
            height: 100%;
            left: 50%;
            transform: translateX(-50%);
        }
        
        .crosshair::after {
            width: 100%;
            height: 2px;
            top: 50%;
            transform: translateY(-50%);
        }
        
        @media (max-width: 768px) {
            #ui {
                width: 260px;
                padding: 15px;
            }
        }
        
        @media (max-width: 600px) {
            #container {
                flex-direction: column-reverse;
            }
            
            #ui {
                width: 100%;
                height: auto;
                max-height: 40vh;
            }
            
            #canvas-container {
                height: 60vh;
            }
        }
    </style>
</head>
<body>
    <div id="container">
        <div id="canvas-container">
            <canvas id="canvas"></canvas>
            
            <div id="overlay">
                <h2>Click to Start</h2>
                <p>Use WASD to move, mouse to look</p>
            </div>
            
            <div class="crosshair"></div>
        </div>
        
        <div id="ui">
            <h1>üéÆ Voxel Ray Traversal</h1>
            <div class="version">
                v2.1 - Brick Map Hierarchy 
                <span class="badge phase2">PHASE 2</span>
            </div>
            
            <div class="tech-note">
                <strong>Brick Maps:</strong> 2-level hierarchy with 8¬≥ bricks. 
                Empty space skipped in O(1). Sparse storage for massive worlds.
            </div>
            
            <!-- Performance Stats -->
            <h2>üìä Performance</h2>
            <div class="stat">
                <span class="stat-label">FPS</span>
                <span class="stat-value highlight" id="fps">0</span>
            </div>
            <div class="stat">
                <span class="stat-label">Frame Time</span>
                <span class="stat-value" id="frame-time">0 ms</span>
            </div>
            <div class="stat">
                <span class="stat-label">Resolution</span>
                <span class="stat-value" id="resolution-display">0 x 0</span>
            </div>
            
            <!-- World Stats -->
            <h2>üåç World</h2>
            <div class="stat">
                <span class="stat-label">World Size</span>
                <span class="stat-value new" id="world-size-display">0¬≥</span>
            </div>
            <div class="stat">
                <span class="stat-label">Voxels</span>
                <span class="stat-value" id="voxel-count">0</span>
            </div>
            <div class="stat">
                <span class="stat-label">Active Bricks</span>
                <span class="stat-value new" id="brick-count">0</span>
            </div>
            <div class="stat">
                <span class="stat-label">Memory</span>
                <span class="stat-value new" id="memory-usage">0 MB</span>
            </div>
            
            <!-- Camera -->
            <h2>üì∑ Camera</h2>
            <div class="stat">
                <span class="stat-label">Position</span>
                <span class="stat-value" id="cam-pos">(0, 0, 0)</span>
            </div>
            <div class="stat">
                <span class="stat-label">Direction</span>
                <span class="stat-value" id="cam-dir">(0, 0, 0)</span>
            </div>
            
            <!-- Settings -->
            <h2>‚öôÔ∏è Settings</h2>
            
            <div class="control-group">
                <label>Resolution Scale</label>
                <input type="range" id="resolution" min="0.25" max="2" step="0.25" value="1">
                <span class="stat-value" id="resolution-val">1x</span>
            </div>
            
            <div class="control-group">
                <label>World Size (Coarse Grid √ó 8¬≥ Bricks)</label>
                <select id="world-size">
                    <option value="16">128¬≥ (2M potential voxels)</option>
                    <option value="32">256¬≥ (16M potential voxels)</option>
                    <option value="64" selected>512¬≥ (134M potential voxels)</option>
                    <option value="128">1024¬≥ (1B potential voxels)</option>
                </select>
            </div>
            
            <div class="control-group">
                <label>Max Steps (Coarse Level)</label>
                <input type="range" id="max-steps" min="64" max="512" step="64" value="256">
                <span class="stat-value" id="max-steps-val">256</span>
            </div>
            
            <div class="control-group">
                <label>FOV</label>
                <input type="range" id="fov" min="30" max="120" step="5" value="70">
                <span class="stat-value" id="fov-val">70¬∞</span>
            </div>
            
            <div class="control-group">
                <label>Scene</label>
                <select id="scene">
                    <option value="demo">Demo Scene</option>
                    <option value="sphere">Sphere</option>
                    <option value="terrain">Terrain</option>
                    <option value="city">City</option>
                </select>
            </div>
            
            <div class="control-group">
                <label>
                    <input type="checkbox" id="show-normals">
                    Show Normals
                </label>
            </div>
            
            <div class="control-group">
                <label>
                    <input type="checkbox" id="enable-shadows" checked>
                    Enable Shadows
                </label>
            </div>
            
            <!-- Controls -->
            <div class="info">
                <strong>Controls:</strong><br>
                <span class="key">W</span>
                <span class="key">A</span>
                <span class="key">S</span>
                <span class="key">D</span> - Move<br>
                <span class="key">Q</span>
                <span class="key">E</span> - Up/Down<br>
                <span class="key">Shift</span> - Fast move<br>
                <span class="key">Mouse</span> - Look<br>
                <span class="key">Scroll</span> - Zoom<br>
                <span class="key">ESC</span> - Release cursor
            </div>
        </div>
    </div>
    
    <script src="engine.js"></script>
    <script src="showcase.js"></script>
    
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const app = new ShowcaseApp('canvas');
            app.run();
        });
    </script>
</body>
</html>
